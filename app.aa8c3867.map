{"version":3,"sources":["src/models/todo.js","src/controllers/todo.js","src/models/storage.js","src/elements/container.js","src/elements/header.js","src/elements/todo-list.js","src/elements/todo-item.js","src/elements/footer.js","src/elements/index.js","src/app.js"],"names":["counter","updateId","init","Todo","title","ENTER_KEY","ESC_KEY","initController","window","storage","updateFuncs","items","get","update","func","set","onhashchange","subscribe","hash","str","location","slice","push","filter","f","h","todo","completed","index","keyCode","event","target","value","trim","length","splice","type","closest","dataset","destroy","blur","forEach","checked","initStorage","localStorage","name","JSON","parse","getItem","setItem","stringify","MyContainer","HyperHTMLElement","render","html","data","define","e","MyHeader","controller","create","TodoList","todos","getFilteredItems","toggleAll","every","map","hyper","TodoItem","oldValue","newValue","input","li","classList","add","querySelector","focus","remove","edit","complete","element","getAttribute","dblclick2Edit","blur2Save","escape2Reset","selectIfMatch","curr","showIfSomeTodos","pluralize","showIfSomeComplete","numTodosIncomplete","numTodos","MyFooter","todosSize","todosLeft","clear","initApp","document"],"mappings":"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","file":"app.aa8c3867.map","sourceRoot":"..","sourcesContent":["let counter = 0;\n\nexport const updateId = (init, counter) => init ? 0 : counter++;\n\nexport const Todo = (title, init) => ({\n\ttitle,\n\tid: updateId(init, counter),\n\tcompleted: false\n});\n","import { Todo } from '../models/todo';\n\nexport const ENTER_KEY = 13;\nexport const ESC_KEY = 27;\n\nexport const initController = (window, storage) => {\n\n\tlet updateFuncs = [];\n\tlet items = storage.get();\n\n\tconst update = () => {\n\t\tfor (let func of updateFuncs) {\n\t\t\tfunc();\n\t\t};\n\t\tstorage.set(items);\n\t};\n\twindow.onhashchange = update;\n\n\tconst subscribe = func => {\n\t\tupdateFuncs.push(func);\n\t\treturn () => {updateFuncs = updateFuncs.filter(f => f != func)}\n\t};\t\n\n\tconst getItems = () => items;\n\tconst getFilteredItems = () => {\n\t\tconst h = hash();\n\t\treturn (h !== 'all') ?\n\t\t\titems.filter(\n\t\t\t\th === 'active' ?\n\t\t\t\t\ttodo => !todo.completed :\n\t\t\t\t\ttodo => todo.completed\n\t\t\t) :\n\t\t\titems;\n\t};\n\n\t// controller actions invoked through the DOM\n\n\tconst clear = () => {\n\t\titems = items.filter(todo => !todo.completed);\n\t\tupdate();\n\t}\n\n\tconst complete = index => {\n\t\tconst todo = items[index];\n\t\ttodo.completed = !todo.completed;\n\t\tupdate();\n\t}\n\n\tconst create = event => {\n\t\tconst {keyCode, target} = event;\n\t\tconst value = target.value.trim();\n\t\tif (keyCode === ENTER_KEY && value.length) {\n\t\t\titems.push(Todo(value));\n\t\t\ttarget.value = '';\n\t\t\tupdate();\n\t\t}\n\t}\n\n\tconst destroy = index => {\n\t\titems.splice(index, 1);\n\t\tupdate();\n\t}\n\n\tconst edit = (index, event) => {\n\t\tconst {type, keyCode, target} = event;\n\t\tif (type === 'blur' || keyCode === ENTER_KEY) {\n\t\t\tconst value = target.value.trim();\n\t\t\tif (value.length) {\n\t\t\t\tconst index = target.closest('li').dataset.index;\n\t\t\t\titems[index].title = value;\n\t\t\t\tupdate();\n\t\t\t} else {\n\t\t\t\tif (type === 'blur') {\n\t\t\t\t\tcontroller.destroy(index);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst hash = () => {\n\t\tconst str = window.location.hash.slice(2);\n\t\treturn str !== 'completed' && str !== 'active' ? 'all' : str;\n\t}\n\n\tconst todosLeft = () => items.filter(todo => !todo.completed).length;\n\n\tconst todosSize = () => items.length;\n\n\tconst toggleAll = event => {\n\t\titems.forEach(todo => {\n\t\t\ttodo.completed = event.target.checked;\n\t\t});\n\t\tupdate();\n\t}\n\n\treturn {\n\t\tsubscribe,\n\t\tgetItems,\n\t\tgetFilteredItems,\n\t\tclear,\n\t\tcomplete,\n\t\tcreate,\n\t\tdestroy,\n\t\tedit,\n\t\thash,\n\t\ttodosLeft,\n\t\ttodosSize,\n\t\ttoggleAll,\n\t\tupdate\n\t}\n\n}\n","export function initStorage(localStorage) {\n\tconst name = 'todos-hyperHTML';\n\treturn {\n\t\tget: () => JSON.parse(localStorage.getItem(name) || '[]'),\n\t\tset: value => localStorage.setItem(name, JSON.stringify(value))\n\t}\n};\n","export class MyContainer extends HyperHTMLElement {\n\tcreated() {\n\t\tthis.render();\n\t}\n\trender() {\n\t\treturn this.html`\n\t\t\t<my-header data=${this.data}></my-header>\n\t\t\t<todo-list data=${this.data}></todo-list>\n\t\t\t<my-footer data=${this.data}></my-footer>`\n\t}\n}\ntry { \n\tMyContainer.define('my-container') \n} catch (e) {}\n","export class MyHeader extends HyperHTMLElement {\n\tcreated() {\n\t\tthis.render();\n\t}\n\trender() {\n\t\treturn this.html`\n\t\t\t<header class=\"header\">\n\t\t\t\t<h1>todos</h1>\n\t\t\t\t<input \n\t\t\t\t\tonkeypress=\"${this.data.controller.create}\" \n\t\t\t\t\tclass=\"new-todo\" \n\t\t\t\t\tplaceholder=\"What needs to be done?\" \n\t\t\t\t\tautofocus>\n\t\t\t</header>`\n\t}\n}\ntry { \n\tMyHeader.define('my-header') \n} catch (e) {}\n","export class TodoList extends HyperHTMLElement {\n\n\tcreated() {\n\t\tthis.render();\n\t\tthis.data.controller.subscribe(() => this.render());\n\t}\n\n\trender() {\n\n\t\tconst controller = this.data.controller;\n\t\tconst todos = controller.getFilteredItems();\n\t\treturn this.html`\n\t\t\t<section class=\"main\" style=\"${todos.length ? '' : 'display:none'}\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"toggle-all\"\n\t\t\t\t\tid=\"toggle-all\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tonclick=\"${controller.toggleAll}\"\n\t\t\t\t\tchecked=\"${todos.every(todo => todo.completed)}\">\n\t\t\t\t<label for=\"toggle-all\">Mark all as complete</label>\n\t\t\t\t<ul class=\"todo-list\">${todos.map(\n\t\t\t\t\t(todo, index) => this.data.hyper(todo)`\n\t\t\t\t\t\t<todo-item \n\t\t\t\t\t\t\ttitle=${todo.title}\n\t\t\t\t\t\t\tcompleted=${todo.completed}\n\t\t\t\t\t\t\tindex=${index} />`\n\t\t\t\t)}</ul>\n\t\t\t</section>`\n\t}\n}\ntry { \n\tTodoList.define('todo-list') \n} catch (e) {}\n","import { ENTER_KEY, ESC_KEY } from '../controllers/todo';\n\nexport class TodoItem extends HyperHTMLElement {\n\n\tstatic get observedAttributes() { return ['title','index','completed']; }\n\t\n\tcreated() {\n\t\tthis.render();\n\t}\n\t\n\tattributeChangedCallback(name, oldValue, newValue) { \n\t\tthis.render(); \n\t}\t\n\t\n\tdblclick2Edit(event, input) {\n\t\tconst li = input.closest('li');\n\t\tli.classList.add('editing');\n\t\tli.querySelector('.edit').focus();\n\t}\n\t\n\tblur2Save(index, event, input) {\n\t\tinput.closest('li').classList.remove('editing');\n\t\tthis.data.controller.edit(index, event);\n\t}\n\n\tedit(index, event, input) {\n\t\tif (event.keyCode === ENTER_KEY) {\t\t\t\n\t\t\tinput.closest('li').classList.remove('editing');\n\t\t}\n\t\tthis.data.controller.edit(index, event);\n\t}\n\n\tescape2Reset(event, input) {\n\t\tif (event.keyCode === ESC_KEY) {\n\t\t\tinput.value = this.data.todo.title;\n\t\t\tinput.blur();\n\t\t}\n\t}\n\n\tcomplete(index) {\n\t\tthis.data.controller.complete(index);\n\t}\n\n\tdestroy(index) {\n\t\tthis.data.controller.destroy(index);\n\t}\n\n\trender(){\n\t\tconst element = this;\n\t\tconst title = this.getAttribute('title');\n\t\tconst completed = this.getAttribute('completed');\n\t\tconst index = this.getAttribute('index');\n\n\t\treturn this.html`\n\t\t<li\n\t\t\tdata-index=\"${index}\"\n\t\t\tclass=\"${completed ? 'completed' : ''}\"\n\t\t>\n\t\t\t<div class=\"view\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"toggle\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tchecked=\"${completed}\"\n\t\t\t\t\tonclick=\"${() => element.complete(index)}\">\n\t\t\t\t<label ondblclick=\"${function(event){\n\t\t\t\t\telement.dblclick2Edit(event, this);\n\t\t\t\t}}\">${title}</label>\n\t\t\t\t<button class=\"destroy\" onclick=\"${() => element.destroy(index)}\"></button>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tclass=\"edit\"\n\t\t\t\tvalue=\"${title}\"\n\t\t\t\tonblur=\"${function(event){ \n\t\t\t\t\telement.blur2Save(index, event, this);\n\t\t\t\t}}\"\n\t\t\t\tonkeypress=\"${function(event){\n\t\t\t\t\telement.edit(index, event, this);\n\t\t\t\t}}\"\n\t\t\t\tonkeydown=\"${function (event) {\n\t\t\t\t\telement.escape2Reset(event, this);\n\t\t\t\t}}\">\n\t\t</li>`;\n\t}\n}\n\ntry { \n\tTodoItem.define('todo-item') \n} catch (e) {}\n","export const selectIfMatch = (hash, curr) => hash === curr ? 'selected' : '';\nexport const showIfSomeTodos = length => length > 0 ? '' : 'display: none';\nexport const pluralize = length => length >= 2 ? 's' : '';\nexport const showIfSomeComplete = (numTodosIncomplete, numTodos) => numTodosIncomplete < numTodos ? '' : 'display: none'\n\nexport class MyFooter extends HyperHTMLElement {\n\tcreated(){\n\t\tthis.render();\n\t\tthis.data.controller.subscribe(() => this.render());\n\t}\n\trender() {\n\t\tconst controller = this.data.controller;\n\t\tconst numTodos = controller.todosSize();\n\t\tconst numTodosIncomplete = controller.todosLeft();\n\t\tconst hash = controller.hash();\n\t\t\n\t\treturn this.html`\n\t\t\t<footer class=\"footer\" style=\"${showIfSomeTodos(numTodos)}\">\n\t\t\t\t<span class=\"todo-count\">\n\t\t\t\t\t<strong> ${numTodosIncomplete} </strong> item${pluralize(numTodosIncomplete)} left\n\t\t\t\t</span>\n\t\t\t\t<ul class=\"filters\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'all')}\" href=\"#/\">All</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'active')}\" href=\"#/active\">Active</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'completed')}\" href=\"#/completed\">Completed</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<button class=\"clear-completed\" onclick=\"${controller.clear}\" style=\"${showIfSomeComplete(numTodosIncomplete, numTodos)}\">Clear completed</button>\n\t\t\t</footer>`\n\t}\n}\ntry { \n\tMyFooter.define('my-footer') \n} catch (e) {};\n","import './container';\nimport './header';\nimport './todo-list';\nimport './todo-item';\nimport './footer';\n","import { initController } from './controllers/todo';\nimport { initStorage } from './models/storage';\n\nimport './elements';\n\nexport function initApp() {\n    const hyper = HyperHTMLElement.hyper;\n\n    const storage = initStorage(window.localStorage);\n    const controller = initController(window, storage);\n    const data = { controller, hyper };\n    const appRender = hyper(window.document.querySelector('#todoapp'));\n    \n    appRender`<my-container data=${data}></my-container>`;\n    controller.update(); \n}\n"]}