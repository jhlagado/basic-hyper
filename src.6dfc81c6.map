{"version":3,"sources":["src/models/todo.js","src/controllers/todo.js","src/models/storage.js","src/elements/container.js","src/elements/header.js","src/elements/main.js","src/elements/footer.js","src/elements/index.js","src/app.js","src/index.js"],"names":["counter","updateId","init","Todo","title","ENTER_KEY","ESC_KEY","initController","window","storage","updateFuncs","items","get","update","func","set","onhashchange","subscribe","hash","str","location","slice","push","filter","f","h","todo","completed","event","index","target","closest","dataset","value","trim","keyCode","length","splice","type","destroy","blur","forEach","checked","initStorage","localStorage","name","JSON","parse","getItem","setItem","stringify","MyContainer","HyperHTMLElement","render","html","data","define","e","MyHeader","controller","create","MyMain","hyper","getItems","indexOf","complete","dblclick2Edit","li","classList","add","querySelector","focus","blur2Save","remove","edit","todos","getFilteredItems","toggleAll","every","map","renderTodo","selectIfMatch","curr","showIfSomeTodos","pluralize","showIfSomeComplete","numTodosIncomplete","numTodos","MyFooter","todosSize","todosLeft","clear","appRender","document"],"mappings":"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","file":"src.6dfc81c6.map","sourceRoot":"..","sourcesContent":["let counter = 0;\n\nexport const updateId = (init, counter) => init ? 0 : counter++;\n\nexport const Todo = (title, init) => ({\n\ttitle,\n\tid: updateId(init, counter),\n\tcompleted: false\n});\n","import { Todo } from '../models/todo';\n\nexport const ENTER_KEY = 13;\nexport const ESC_KEY = 27;\n\nexport const initController = (window, storage) => {\n\n\tlet updateFuncs = [];\n\tlet items = storage.get();\n\n\tconst update = () => {\n\t\tfor (let func of updateFuncs) {\n\t\t\tfunc();\n\t\t};\n\t\tstorage.set(items);\n\t};\n\twindow.onhashchange = update;\n\n\tconst subscribe = func => {\n\t\tupdateFuncs.push(func);\n\t\treturn () => {updateFuncs = updateFuncs.filter(f => f != func)}\n\t};\t\n\n\tconst getItems = () => items;\n\tconst getFilteredItems = () => {\n\t\tconst h = hash();\n\t\treturn (h !== 'all') ?\n\t\t\titems.filter(\n\t\t\t\th === 'active' ?\n\t\t\t\t\ttodo => !todo.completed :\n\t\t\t\t\ttodo => todo.completed\n\t\t\t) :\n\t\t\titems;\n\t};\n\n\t// controller actions invoked through the DOM\n\n\tconst clear = () => {\n\t\titems = items.filter(todo => !todo.completed);\n\t\tupdate();\n\t}\n\n\tconst complete = event => {\n\t\tconst index = event.target.closest('li').dataset.index;\n\t\tconst todo = items[index];\n\t\ttodo.completed = !todo.completed;\n\t\tupdate();\n\t}\n\n\tconst create = event => {\n\t\tconst target = event.target;\n\t\tconst value = target.value.trim();\n\t\tif (event.keyCode === ENTER_KEY && value.length) {\n\t\t\titems.push(Todo(value));\n\t\t\ttarget.value = '';\n\t\t\tupdate();\n\t\t}\n\t}\n\n\tconst destroy = event => {\n\t\tconst index = event.target.closest('li').dataset.index;\n\t\titems.splice(index, 1);\n\t\tupdate();\n\t}\n\n\tconst edit = event => {\n\t\tconst {type, keyCode, target} = event;\n\t\tif (type === 'blur' || keyCode === ENTER_KEY) {\n\t\t\tconst value = target.value.trim();\n\t\t\tif (value.length) {\n\t\t\t\tconst index = target.closest('li').dataset.index;\n\t\t\t\titems[index].title = value;\n\t\t\t\tupdate();\n\t\t\t} else {\n\t\t\t\tif (type === 'blur') {\n\t\t\t\t\tcontroller.destroy(event);\n\t\t\t\t} else {\n\t\t\t\t\ttarget.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst hash = () => {\n\t\tconst str = window.location.hash.slice(2);\n\t\treturn str !== 'completed' && str !== 'active' ? 'all' : str;\n\t}\n\n\tconst todosLeft = () => items.filter(todo => !todo.completed).length;\n\n\tconst todosSize = () => items.length;\n\n\tconst toggleAll = event => {\n\t\titems.forEach(todo => {\n\t\t\ttodo.completed = event.target.checked;\n\t\t});\n\t\tupdate();\n\t}\n\n\treturn {\n\t\tsubscribe,\n\t\tgetItems,\n\t\tgetFilteredItems,\n\t\tclear,\n\t\tcomplete,\n\t\tcreate,\n\t\tdestroy,\n\t\tedit,\n\t\thash,\n\t\ttodosLeft,\n\t\ttodosSize,\n\t\ttoggleAll,\n\t\tupdate\n\t}\n\n}\n","export function initStorage(localStorage) {\n\tconst name = 'todos-hyperHTML';\n\treturn {\n\t\tget: () => JSON.parse(localStorage.getItem(name) || '[]'),\n\t\tset: value => localStorage.setItem(name, JSON.stringify(value))\n\t}\n};\n","export class MyContainer extends HyperHTMLElement {\n\tcreated() {\n\t\tthis.render();\n\t}\n\trender() {\n\t\treturn this.html`\n\t\t\t<my-header data=${this.data}></my-header>\n\t\t\t<my-main data=${this.data}></my-main>\n\t\t\t<my-footer data=${this.data}></my-footer>`\n\t}\n}\ntry { \n\tMyContainer.define('my-container') \n} catch (e) {}\n","export class MyHeader extends HyperHTMLElement {\n\tcreated() {\n\t\tthis.render();\n\t}\n\trender() {\n\t\treturn this.html`\n\t\t\t<header class=\"header\">\n\t\t\t\t<h1>todos</h1>\n\t\t\t\t<input \n\t\t\t\t\tonkeypress=\"${this.data.controller.create}\" \n\t\t\t\t\tclass=\"new-todo\" \n\t\t\t\t\tplaceholder=\"What needs to be done?\" \n\t\t\t\t\tautofocus>\n\t\t\t</header>`\n\t}\n}\ntry { \n\tMyHeader.define('my-header') \n} catch (e) {}\n","import { ENTER_KEY, ESC_KEY } from '../controllers/todo';\n\nexport class MyMain extends HyperHTMLElement {\n\n\tcreated() {\n\t\tthis.render();\n\t\tthis.data.controller.subscribe(() => this.render());\n\t}\n\n\trenderTodo() {\n\n\t\tconst controller = this.data.controller;\n\n\t\tfunction dblclick2Edit() {\n\t\t\tconst li = this.closest('li');\n\t\t\tli.classList.add('editing');\n\t\t\tli.querySelector('.edit').focus();\n\t\t}\n\t\t\n\t\tfunction blur2Save(event) {\n\t\t\tthis.closest('li').classList.remove('editing');\n\t\t\tcontroller.edit(event);\n\t\t}\n\n\t\tfunction edit(event) {\n\t\t\tif (event.keyCode === ENTER_KEY) {\t\t\t\n\t\t\t\tthis.closest('li').classList.remove('editing');\n\t\t\t}\n\t\t\tcontroller.edit(event);\n\t\t}\n\n\t\treturn todo => this.data.hyper(todo)`\n\t\t\t<li\n\t\t\t\tdata-index=\"${controller.getItems().indexOf(todo)}\"\n\t\t\t\tclass=\"${todo.completed ? 'completed' : ''}\"\n\t\t\t>\n\t\t\t\t<div class=\"view\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"toggle\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked=\"${todo.completed}\"\n\t\t\t\t\t\tonclick=\"${controller.complete}\">\n\t\t\t\t\t<label ondblclick=\"${dblclick2Edit}\">\n\t\t\t\t\t\t${todo.title}\n\t\t\t\t\t</label>\n\t\t\t\t\t<button class=\"destroy\" onclick=\"${controller.destroy}\"></button>\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"edit\"\n\t\t\t\t\tvalue=\"${todo.title}\"\n\t\t\t\t\tonblur=\"${blur2Save}\"\n\t\t\t\t\tonkeypress=\"${edit}\"\n\t\t\t\t\tonkeydown=\"${function escape2Reset(event) {\n\t\t\t\t\t\tif (event.keyCode === ESC_KEY) {\n\t\t\t\t\t\t\tthis.value = todo.title;\n\t\t\t\t\t\t\tthis.blur();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\">\n\t\t\t</li>`;\n\t}\n\n\trender() {\n\t\tconst controller = this.data.controller;\n\t\tconst todos = controller.getFilteredItems();\n\t\treturn this.html`\n\t\t\t<section class=\"main\" style=\"${todos.length ? '' : 'display:none'}\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"toggle-all\"\n\t\t\t\t\tid=\"toggle-all\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tonclick=\"${controller.toggleAll}\"\n\t\t\t\t\tchecked=\"${todos.every(todo => todo.completed)}\">\n\t\t\t\t<label for=\"toggle-all\">Mark all as complete</label>\n\t\t\t\t<ul class=\"todo-list\">${todos.map(this.renderTodo())}</ul>\n\t\t\t</section>`\n\t}\n}\ntry { \n\tMyMain.define('my-main') \n} catch (e) {}\n","export const selectIfMatch = (hash, curr) => hash === curr ? 'selected' : '';\nexport const showIfSomeTodos = length => length > 0 ? '' : 'display: none';\nexport const pluralize = length => length >= 2 ? 's' : '';\nexport const showIfSomeComplete = (numTodosIncomplete, numTodos) => numTodosIncomplete < numTodos ? '' : 'display: none'\n\nexport class MyFooter extends HyperHTMLElement {\n\tcreated(){\n\t\tthis.render();\n\t\tthis.data.controller.subscribe(() => this.render());\n\t}\n\trender() {\n\t\tconst controller = this.data.controller;\n\t\tconst numTodos = controller.todosSize();\n\t\tconst numTodosIncomplete = controller.todosLeft();\n\t\tconst hash = controller.hash();\n\t\t\n\t\treturn this.html`\n\t\t\t<footer class=\"footer\" style=\"${showIfSomeTodos(numTodos)}\">\n\t\t\t\t<span class=\"todo-count\">\n\t\t\t\t\t<strong> ${numTodosIncomplete} </strong> item${pluralize(numTodosIncomplete)} left\n\t\t\t\t</span>\n\t\t\t\t<ul class=\"filters\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'all')}\" href=\"#/\">All</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'active')}\" href=\"#/active\">Active</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class=\"${selectIfMatch(hash, 'completed')}\" href=\"#/completed\">Completed</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<button class=\"clear-completed\" onclick=\"${controller.clear}\" style=\"${showIfSomeComplete(numTodosIncomplete, numTodos)}\">Clear completed</button>\n\t\t\t</footer>`\n\t}\n}\ntry { \n\tMyFooter.define('my-footer') \n} catch (e) {};\n","import './container';\nimport './header';\nimport './main';\nimport './footer';\n","import { initController } from './controllers/todo';\nimport { initStorage } from './models/storage';\nimport './elements';\n\nconst hyper = HyperHTMLElement.hyper;\n\nconst storage = initStorage(window.localStorage);\nconst controller = initController(window, storage);\nconst data = { controller, hyper };\nconst appRender = hyper(window.document.querySelector('#todoapp'));\n\nappRender`<my-container data=${data}></my-container>`;\ncontroller.update(); \n","import \"todomvc-common/base.css\";\nimport \"todomvc-app-css/index.css\";\nimport { initApp } from './app.js';\n\nconst hyper = HyperHTMLElement.hyper;\n\ninitApp(hyper, window);\n\n"]}